<table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
  <ng-container matColumnDef="name" class="header-cont">
    <th
      mat-header-cell
      *matHeaderCellDef
      mat-sort-header
      sortActionDescription="Ordenar por Nombre"
    >
      <p>Competidor</p>
    </th>
    <td mat-cell *matCellDef="let element">
      <div class="name-info-box">
        <button
          mat-icon-button
          (click)="expanded = expanded === element ? null : element"
        >
          <i class="fa-solid fa-eye"></i>
        </button>
        <div class="word-companion-info">
          <p>{{ element.name }}</p>
        </div>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="belt" class="header-cont">
    <th
      mat-header-cell
      *matHeaderCellDef
      mat-sort-header
      sortActionDescription="Ordenar por Cinturón"
    >
      <p>Cinturón</p>
    </th>
    <td mat-cell *matCellDef="let element">
      <p>{{ element.belt }}</p>
    </td>
  </ng-container>

  <ng-container matColumnDef="total" class="header-cont">
    <th
      mat-header-cell
      *matHeaderCellDef
      mat-sort-header
      sortActionDescription="Ordenar por Total"
    >
      <p>TOTAL de puntos</p>
    </th>
    <td mat-cell *matCellDef="let element">
      <p>{{ element.total }}</p>
    </td>
  </ng-container>

  <!-- ---------- Expanded Detail ---------- -->

  <ng-container matColumnDef="expandedDetail">
    <td
      mat-cell
      *matCellDef="let element"
      [attr.colspan]="displayedColumns.length"
    >
      <div [@detailExpand]="element === expanded ? 'expanded' : 'collapsed'">
        <p>Escuela: {{ element.school }}</p>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

  <tr
    mat-row
    *matRowDef="let element; columns: displayedColumns"
    [class.expanded-row]="element.isExpanded"
    (click)="element.isExpanded = !element.isExpanded"
  ></tr>

  <tr
    mat-row
    *matRowDef="let row; columns: ['expandedDetail']"
    class="expanded"
  ></tr>

  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="displayedColumns.length">{{ showError }}</td>
  </tr>
</table>
